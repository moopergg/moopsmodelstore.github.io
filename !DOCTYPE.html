<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox Model Marketplace</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .main-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            overflow-y: auto;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #00b4ff;
            margin-bottom: 30px;
            text-align: center;
        }

        .user-info {
            background: rgba(114, 137, 218, 0.1);
            border: 1px solid rgba(114, 137, 218, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .discord-link-btn {
            background: #7289da;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            width: 100%;
        }

        .discord-link-btn:hover {
            background: #5865f2;
            transform: translateY(-2px);
        }

        .linked-user {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .discord-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #7289da;
        }

        .search-section {
            margin-bottom: 30px;
        }

        .search-box {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #00b4ff;
            background: rgba(255, 255, 255, 0.15);
        }

        .search-box::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .categories {
            margin-bottom: 30px;
        }

        .category-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #00b4ff;
        }

        .category-item {
            padding: 10px 15px;
            margin-bottom: 5px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.05);
        }

        .category-item:hover {
            background: rgba(0, 180, 255, 0.2);
            transform: translateX(5px);
        }

        .category-item.active {
            background: rgba(0, 180, 255, 0.3);
            border-left: 3px solid #00b4ff;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            padding: 20px 30px;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .results-count {
            font-size: 18px;
            font-weight: 500;
        }

        .models-grid {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            align-content: start;
        }

        .model-card {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 0;
            transition: all 0.3s ease;
            cursor: pointer;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .model-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 180, 255, 0.3);
            border-color: rgba(0, 180, 255, 0.5);
        }

        .model-image {
            width: 100%;
            height: 180px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }

        .model-image.has-image::after {
            display: none;
        }

        .model-image::after {
            content: 'üéÆ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            opacity: 0.7;
        }

        .model-info {
            padding: 15px;
        }

        .model-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .model-creator {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 10px;
        }

        .model-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .model-price {
            font-size: 18px;
            font-weight: bold;
            color: #00ff88;
        }

        .model-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
        }

        .stars {
            color: #ffd700;
        }

        .model-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .btn-primary {
            background: #00b4ff;
            color: white;
        }

        .btn-primary:hover {
            background: #0095cc;
            transform: translateY(-1px);
        }

        .btn-primary:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            width: 600px;
            max-width: 90%;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 24px;
            font-weight: bold;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .modal-image {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            background-size: cover;
            background-position: center;
        }

        .modal-image::after {
            content: 'üéÆ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 72px;
            opacity: 0.7;
        }

        .modal-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .detail-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 8px;
        }

        .detail-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 16px;
            font-weight: 500;
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .btn-large {
            padding: 12px 24px;
            font-size: 16px;
        }

        .purchase-warning {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            color: #ffc107;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(0, 180, 255, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 180, 255, 0.7);
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo">üü¶ Moop's Model Store</div>
            
            <!-- Discord Account Section -->
            <div class="user-info" id="userInfo">
                <div id="discordLinking">
                    <p style="margin-bottom: 10px; font-size: 14px;">Link Discord to purchase models</p>
                    <button class="discord-link-btn" onclick="linkDiscord()">üîó Link Discord Account</button>
                </div>
                <div id="discordLinked" style="display: none;">
                    <div class="linked-user">
                        <img class="discord-avatar" id="userAvatar" src="" alt="Avatar">
                        <div>
                            <div id="userName" style="font-weight: bold;"></div>
                            <div style="font-size: 12px; opacity: 0.7;">Discord Linked ‚úÖ</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="search-section">
                <input type="text" class="search-box" placeholder="Search models..." id="searchBox">
            </div>

            <div class="categories">
                <div class="category-title">Categories</div>
                <div class="category-item active" data-category="all">All Models</div>
                <div class="category-item" data-category="characters">Characters</div>
                <div class="category-item" data-category="vehicles">Vehicles</div>
                <div class="category-item" data-category="buildings">Buildings</div>
                <div class="category-item" data-category="weapons">Weapons</div>
                <div class="category-item" data-category="nature">Nature</div>
                <div class="category-item" data-category="furniture">Furniture</div>
                <div class="category-item" data-category="tools">Tools</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <div class="header-left">
                    <div class="results-count">Loading models...</div>
                </div>
            </div>

            <div class="models-grid" id="modelsGrid">
                <!-- Models will be generated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Purchase Modal -->
    <div class="modal" id="purchaseModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Purchase Model</div>
                <button class="close-btn" onclick="closePurchaseModal()">&times;</button>
            </div>
            
            <div class="purchase-warning">
                <strong>‚ö†Ô∏è Important:</strong> After payment, you'll receive your model via Discord DM within 24 hours.
            </div>
            
            <div class="modal-image" id="modalImage"></div>
            <div class="modal-details">
                <div class="detail-item">
                    <div class="detail-label">Model Name</div>
                    <div class="detail-value" id="modalModelName"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Price</div>
                    <div class="detail-value" id="modalPrice"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Your Discord</div>
                    <div class="detail-value" id="modalDiscordUser"></div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Your Roblox</div>
                    <div class="detail-value">
                        <input type="text" id="robloxUsername" placeholder="Enter your Roblox username" 
                               style="background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); 
                                      border-radius: 4px; padding: 8px; color: white; width: 100%;">
                    </div>
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="btn btn-primary btn-large" id="purchaseBtn" onclick="proceedToPurchase()">
                    Proceed to Robux Payment
                </button>
                <button class="btn btn-secondary btn-large" onclick="closePurchaseModal()">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // ================== CONFIGURATION ==================
        const DISCORD_WEBHOOK_URL = 'https://discord.com/api/webhooks/1399001169090580663/Yobx-NhfKAK_LnsUcZBlvwIAYcISglKm6M0T0tgsAaIxp2Q4dD27O8ao7IK_KtN_OlG4'; // Replace with your webhook URL
        const GAMEPASS_ID = '1347732932'; // Replace with your Roblox gamepass ID for payments
        
        // Your custom model data - ADD YOUR MODELS HERE
        const models = [
            { 
                name: "Studded Tree", 
                creator: "Mooper_Man", 
                price: "100", // Price in Robux
                rating: 4.8, 
                downloads: 0, 
                category: "nature", 
                image: "C:\Users\david\Downloads\tree model.png", // Path to your model image
                assetId: "117903818293269",
                description: "A cool & detailed studded tree!"
            },
            { 
                name: "Studded Rock", 
                creator: "Mooper_Man", 
                price: "100", 
                rating: 4.9, 
                downloads: 0, 
                category: "nature", 
                image: "C:\Users\david\Downloads\rock model.png",
                assetId: "129774547259082",
                description: "Really detailed studded rock model!"
            },
            { 
                name: "Studded Light Post", 
                creator: "Mooper_Man", 
                price: "100", 
                rating: 4.7, 
                downloads: 0, 
                category: "buildings", 
                image: "C:\Users\david\Downloads\light model.png",
                assetId: "117176535803309",
                description: "Beautiful simple studded light post."
            },
            { 
                name: "Free Starter Pack", 
                creator: "Mooper_Man", 
                price: "Free", 
                rating: 4.5, 
                downloads: 0, 
                category: "tools", 
                image: "C:\Users\david\Downloads\my assets 1.png",
                assetId: "140212663047255",
                description: "Free tools to get you started"
            }
            // Add more of your models here...
        ];

        // ================== DISCORD INTEGRATION ==================
        let discordUser = null;
        let currentPurchaseModel = null;

        // Simulate Discord OAuth (In real implementation, use Discord OAuth2)
        function linkDiscord() {
            // In a real implementation, this would use Discord OAuth2
            // For demo purposes, we'll simulate it
            const username = prompt("Enter your Discord username for demo purposes:");
            if (username) {
                discordUser = {
                    username: username,
                    discriminator: "0001",
                    id: "123456789",
                    avatar: "https://cdn.discordapp.com/embed/avatars/0.png"
                };
                updateDiscordUI();
                localStorage.setItem('discordUser', JSON.stringify(discordUser));
            }
        }

        function updateDiscordUI() {
            if (discordUser) {
                document.getElementById('discordLinking').style.display = 'none';
                document.getElementById('discordLinked').style.display = 'block';
                document.getElementById('userName').textContent = discordUser.username;
                document.getElementById('userAvatar').src = discordUser.avatar;
            }
        }

        // ================== PURCHASE SYSTEM ==================
        function purchaseModel(model) {
            if (!discordUser) {
                alert('Please link your Discord account first!');
                return;
            }
            
            currentPurchaseModel = model;
            document.getElementById('modalTitle').textContent = `Purchase ${model.name}`;
            document.getElementById('modalModelName').textContent = model.name;
            document.getElementById('modalPrice').textContent = model.price === "Free" ? "Free" : `${model.price} Robux`;
            document.getElementById('modalDiscordUser').textContent = `${discordUser.username}#${discordUser.discriminator}`;
            
            // Set modal image
            const modalImage = document.getElementById('modalImage');
            if (model.image) {
                modalImage.style.backgroundImage = `url('${model.image}')`;
                modalImage.style.backgroundSize = 'cover';
                modalImage.style.backgroundPosition = 'center';
            }
            
            document.getElementById('purchaseModal').style.display = 'block';
        }

        function closePurchaseModal() {
            document.getElementById('purchaseModal').style.display = 'none';
            currentPurchaseModel = null;
        }

        async function proceedToPurchase() {
            const robloxUsername = document.getElementById('robloxUsername').value.trim();
            
            if (!robloxUsername) {
                alert('Please enter your Roblox username!');
                return;
            }

            if (currentPurchaseModel.price === "Free") {
                // Handle free model
                await sendDiscordNotification(currentPurchaseModel, robloxUsername, "FREE");
                alert('Free model request sent! Check your Discord DMs within a few minutes.');
                closePurchaseModal();
                return;
            }

            // For paid models, redirect to Roblox gamepass purchase
            const confirmPurchase = confirm(
                `You will be redirected to Roblox to purchase a ${currentPurchaseModel.price} Robux gamepass.\n\n` +
                `After purchasing, you'll automatically receive "${currentPurchaseModel.name}" via Discord DM.\n\n` +
                `Continue to Roblox payment?`
            );

            if (confirmPurchase) {
                // Send notification to Discord about pending purchase
                await sendDiscordNotification(currentPurchaseModel, robloxUsername, "PENDING");
                
                // Redirect to Roblox gamepass (replace with your actual gamepass ID)
                window.open(`https://www.roblox.com/game-pass/${GAMEPASS_ID}`, '_blank');
                
                alert('After completing the Robux payment, you\'ll receive your model within 24 hours!');
                closePurchaseModal();
            }
        }

        // ================== DISCORD WEBHOOK ==================
        async function sendDiscordNotification(model, robloxUsername, status) {
            if (!DISCORD_WEBHOOK_URL || DISCORD_WEBHOOK_URL === 'YOUR_DISCORD_WEBHOOK_URL_HERE') {
                console.log('Discord webhook not configured');
                return;
            }

            const embed = {
                title: status === "FREE" ? "üÜì Free Model Request" : "üí∞ New Purchase Request",
                color: status === "FREE" ? 0x00ff00 : 0xffd700,
                fields: [
                    { name: "Model", value: model.name, inline: true },
                    { name: "Price", value: model.price === "Free" ? "Free" : `${model.price} Robux`, inline: true },
                    { name: "Status", value: status, inline: true },
                    { name: "Discord User", value: `${discordUser.username}#${discordUser.discriminator}`, inline: true },
                    { name: "Roblox Username", value: robloxUsername, inline: true },
                    { name: "Asset ID", value: model.assetId, inline: true }
                ],
                timestamp: new Date().toISOString(),
                footer: { text: "Model Purchase System" }
            };

            try {
                await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ embeds: [embed] })
                });
            } catch (error) {
                console.error('Failed to send Discord notification:', error);
            }
        }

        // ================== MODEL DISPLAY ==================
        let currentModels = [...models];
        let selectedCategory = 'all';

        function generateModelCards() {
            const grid = document.getElementById('modelsGrid');
            grid.innerHTML = '';

            currentModels.forEach((model, index) => {
                const card = document.createElement('div');
                card.className = 'model-card';
                card.onclick = () => purchaseModel(model);
                
                const stars = '‚≠ê'.repeat(Math.floor(model.rating));
                
                // Handle image display
                const imageStyle = model.image ? 
                    `background-image: url('${model.image}'); background-size: cover; background-position: center;` : 
                    '';
                const imageClass = model.image ? 'model-image has-image' : 'model-image';
                
                const isDisabled = !discordUser;
                const buttonText = model.price === "Free" ? "Get Free" : `Buy ${model.price} R$`;
                
                card.innerHTML = `
                    <div class="${imageClass}" style="${imageStyle}"></div>
                    <div class="model-info">
                        <div class="model-title">${model.name}</div>
                        <div class="model-creator">by ${model.creator}</div>
                        <div class="model-stats">
                            <div class="model-price">${model.price === "Free" ? "Free" : model.price + " R$"}</div>
                            <div class="model-rating">
                                <span class="stars">${stars}</span>
                                <span>(${model.rating})</span>
                            </div>
                        </div>
                        <div class="model-actions">
                            <button class="btn btn-primary" ${isDisabled ? 'disabled' : ''} 
                                    onclick="event.stopPropagation(); purchaseModel(models[${models.indexOf(model)}])">
                                ${isDisabled ? 'Link Discord First' : buttonText}
                            </button>
                        </div>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // ================== SEARCH & FILTER ==================
        function filterModels() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            
            currentModels = models.filter(model => {
                const matchesSearch = model.name.toLowerCase().includes(searchTerm) || 
                                    model.creator.toLowerCase().includes(searchTerm);
                const matchesCategory = selectedCategory === 'all' || model.category === selectedCategory;
                
                return matchesSearch && matchesCategory;
            });
            
            document.querySelector('.results-count').textContent = `${currentModels.length} Models Found`;
            generateModelCards();
        }

        // ================== INITIALIZATION ==================
        document.addEventListener('DOMContentLoaded', function() {
            // Check for saved Discord user
            const savedUser = localStorage.getItem('discordUser');
            if (savedUser) {
                discordUser = JSON.parse(savedUser);
                updateDiscordUI();
            }

            // Set up category filtering
            document.querySelectorAll('.category-item').forEach(item => {
                item.addEventListener('click', function() {
                    document.querySelectorAll('.category-item').forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    selectedCategory = this.dataset.category;
                    filterModels();
                });
            });

            // Set up search
            document.getElementById('searchBox').addEventListener('input', filterModels);

            // Close modal when clicking outside
            document.getElementById('purchaseModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closePurchaseModal();
                }
            });

            // Initialize display
            generateModelCards();
            document.querySelector('.results-count').textContent = `${models.length} Models Found`;
        });
    </script>
</body>
</html>